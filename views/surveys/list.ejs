<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>설문조사 목록</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/css/adminlte.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
</head>
<body class="hold-transition sidebar-mini">
  <div class="wrapper">

    <%- include('../partials/header') %>
    <%- include('../partials/sidebar') %>

    <div class="content-wrapper">
      <section class="content">
        <div class="container-fluid">
          <h1 class="mt-4">설문조사 목록</h1>
          <div class="card">
            <div class="card-body">
              <ul class="list-group">
                <% surveys.forEach(function(survey) { %>
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                      <a href="/survey/<%= survey._id %>/respond" class="list-group-item-action"><%= survey.title %></a>
                      <a href="/survey/<%= survey._id %>/results" class="btn btn-link">결과 보기</a>
                      <a href="/survey/<%= survey._id %>/edit" class="btn btn-warning btn-sm">수정</a>
                    </div>
                    <div>
                      <form action="/survey/<%= survey._id %>/clone" method="POST" style="display:inline;">
                          <button type="submit" class="btn btn-info btn-sm">복제</button>
                      </form>
                      <form action="/survey/<%= survey._id %>/delete" method="POST" style="display:inline;">
                          <button type="submit" class="btn btn-danger btn-sm">삭제</button>
                      </form>
                    </div>
                  </li>
                <% }); %>
              </ul>
              <a href="/survey/new" class="btn btn-primary mt-3">새 설문조사 만들기</a>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/js/adminlte.min.js"></script>
  <script>
      document.documentElement.dataset.lang = '<%= lang %>';
  </script>
  <script src="/js/lang.js"></script> 
</body>
</html>
