<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>번역기</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <h1><%= notice.title %> 번역</h1>
    <form action="/notices/translate/<%= notice._id %>" method="POST">
        <label for="targetLang">목표 언어 선택:</label>
        <select id="targetLang" name="targetLang" required>
          <option value="" disabled selected>언어 선택</option>
          <% const lang = typeof targetLang !== 'undefined' ? targetLang : ''; %>
          <option value="en" <%= targetLang === 'en' ? 'selected' : '' %>>영어</option>
          <option value="jp" <%= targetLang === 'jp' ? 'selected' : '' %>>일본어</option>
          <option value="tc" <%= targetLang === 'tc' ? 'selected' : '' %>>중국어(번체)</option>
          <option value="sc" <%= targetLang === 'sc' ? 'selected' : '' %>>중국어(간체)</option>
          <option value="vi" <%= targetLang === 'vi' ? 'selected' : '' %>>베트남어</option>
        </select>
        <button type="submit">번역</button>
    </form>
    
    <% if (lines && lines.length > 0) { %>
      <form action="/notices/translate/save/<%= notice._id %>" method="POST">
          <input type="hidden" name="title" value="<%= notice.title %>">
          <input type="hidden" name="content" value="<%= notice.content %>">
          <input type="hidden" name="lang" value="<%= targetLang %>">
          <% for (let i = 0; i < lines.length; i++) { %>
              <div class="translation-pair">
                  <div class="original">
                      <strong>한국어 원문:</strong> <%= lines[i] %>
                  </div>
                  <div class="google-translation">
                      <img src="/google.png" alt="구글 번역" style="width: 16px; height: 16px;"> <%= googleTranslations[i] %>
                  </div>
                  <div class="microsoft-translation">
                      <img src="/microsoft.png" alt="마이크로소프트 번역" style="width: 16px; height: 16px;"> <%= microsoftTranslations[i] %>
                  </div>
                  <div class="final-translation">
                      <label for="finalTranslation<%= i %>">최종 번역:</label>
                      <input type="text" id="finalTranslation<%= i %>" name="finalTranslations[<%= i %>]" value="<%= finalTranslations[i] || '' %>" required>
                  </div>
              </div>
              <hr>
          <% } %>
          <button type="submit">저장</button>
      </form>
    <% } else { %>
      <p>번역할 내용이 없습니다.</p>
    <% } %>

    
</body>
</html>
