<style>
  /* PC 화면에서만 사이드바 너비를 고려한 본문의 왼쪽 여백 설정 */
  @media (min-width: 992px) { /* 992px 이상 화면에서만 적용 */
      body {
          margin-left: 250px; /* 사이드바의 너비 */
      }
  }
</style>

<!-- 하단 내비게이션바 (views/partials/bottom-navbar.ejs) 사이드바 필요 시 'd-lg-none' 속성 입력 -->
<nav id="bottom-navbar" class="navbar navbar-expand-lg navbar-light border-top d-lg-none shadow py-1" style="background-color: rgba(255, 255, 255, 0.99); position: fixed; bottom: 0; width: 100%; z-index: 2000; transition: transform 0.3s;">
  <div class="container-fluid p-0 mb-1">
      <ul class="navbar-nav d-flex justify-content-between" style="width: 100%; flex-direction: row;">
          <li class="nav-item" style="width: 18%;">
              <a class="nav-link text-center opacity-75 p-0" href="/">
                  <i class="bi bi-house-door-fill" style="font-size: 22px; color: #254B7A;"></i>
                  <div class="small" style="color: #254B7A; margin-top: -3px; font-size: 0.75rem;"><strong>Home</strong></div>
              </a>
          </li>
          <li class="nav-item" style="width: 18%;">
              <a class="nav-link text-center opacity-75 p-0" href="/notice">
                <i class="bi bi-bell-fill" style="font-size: 22px;"></i>
                  <div class="small" style="margin-top: -3px; font-size: 0.75rem;">Notice</div>
              </a>
          </li>
          <li class="nav-item" style="width: 18%;">
              <a class="nav-link text-center opacity-75 p-0" href="/guidebook">
                  <i class="bi bi-book-fill" style="font-size: 22px;"></i>
                  <div class="small" style="margin-top: -3px; font-size: 0.75rem;">Guidebook</div>
              </a>
          </li>
          <li class="nav-item" style="width: 18%;">
              <a class="nav-link text-center opacity-75 p-0" href="/boards">
                  <i class="bi bi-chat-left-text-fill" style="font-size: 22px;"></i>
                  <div class="small" style="margin-top: -3px; font-size: 0.75rem;">Community</div>
              </a>
          </li>
          <li class="nav-item" style="width: 18%; position: relative;">
              <div class="btn-group dropup d-flex justify-content-center align-items-start">
              <a class="btn text-center p-0 border-0 opacity-75" id="OtherDropup" data-bs-toggle="dropdown" aria-expanded="false" role="button">
                  <i class="bi bi-three-dots" style="font-size: 22px; opacity: 0.75;"></i>
                  <div class="small" style="margin-top: -3px; font-size: 0.75rem; opacity: 0.75;">Other</div>
              </a>
              <ul class="dropdown-menu dropdown-menu-end p-2 bg-light-subtle" aria-labelledby="OtherDropup" style="position: absolute; bottom: 90%; margin-right: 10px; min-width: 0;">
                  <li class="d-flex align-items-center"><a class="dropdown-item small px-1 my-1" href="/option1"><i class="bi bi-dot"></i>레벨테스트</a></li>
                  <li class="d-flex align-items-center"><a class="dropdown-item small px-1 my-1" href="/option2"><i class="bi bi-dot"></i>증명서 처리</a></li>
                  <li class="d-flex align-items-center"><a class="dropdown-item small px-1 my-1" href="/option4"><i class="bi bi-dot"></i>기타</a></li>
                  <% if (user && (user.role === 'admin' || user.role === 'superadmin')) { %>
                  <li class="d-flex align-items-center"><a class="dropdown-item small px-1 my-1" href="/admin/member"><i class="bi bi-dot"></i>관리자 페이지</a></li>
                <% } %>
              </ul>
            </div>
          </li>
      </ul>
  </div>
</nav>

<script>
    let lastScrollTop = 0; // 마지막 스크롤 위치
    const navbar = document.getElementById('bottom-navbar');

    window.addEventListener('scroll', function() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollTop > lastScrollTop) {
            // 아래로 스크롤할 때
            navbar.style.transform = 'translateY(100%)'; // 내비게이션 바 숨기기
        } else {
            // 위로 스크롤할 때
            navbar.style.transform = 'translateY(0)'; // 내비게이션 바 보이기
        }
        lastScrollTop = scrollTop; // 현재 스크롤 위치 업데이트
    });
</script>

<!-- 사이드바 (PC 화면 전용) -->
<div class="d-none d-lg-block shadow" style="position: fixed; left: 0; top: 0; height: 100%; width: 250px; background-color: #343a40; color: white; z-index: 1000;"> <!-- 배경색을 어두운 색으로 변경 -->
  <ul class="navbar-nav flex-column p-3">
      <li class="nav-item">
          <a class="nav-link d-flex align-items-center text-center" href="/" style="opacity: 0.9; color: white;"> <!-- 텍스트 색상 변경 -->
              <i class="bi bi-house-door-fill" style="font-size: 18px; color: white;"></i>
              <div class="ms-2 style="opacity: 0.9;">홈</div>
          </a>
      </li>
      <li class="nav-item">
          <a class="nav-link d-flex align-items-center text-center" href="/notice" style="opacity: 0.9; color: white;">
              <i class="bi bi-bell-fill" style="font-size: 18px; color: white;"></i>
              <div class="ms-2" style="opacity: 0.9;">안내문</div>
          </a>
      </li>
      <li class="nav-item">
          <a class="nav-link d-flex align-items-center text-center" href="/guidebook" style="opacity: 0.9; color: white;">
              <i class="bi bi-book-fill" style="font-size: 18px; color: white;"></i>
              <div class="ms-2" style="opacity: 0.9;">가이드북</div>
          </a>
      </li>
      <li class="nav-item">
          <a class="nav-link d-flex align-items-center text-center" href="/boards" style="opacity: 0.9; color: white;">
              <i class="bi bi-chat-left-text-fill" style="font-size: 18px; color: white;"></i>
              <div class="ms-2" style="opacity: 0.9;">커뮤니티</div>
          </a>
      </li>
      <li class="nav-item">
          <a class="nav-link d-flex align-items-center text-center" href="/more" style="opacity: 0.9; color: white;">
              <i class="bi bi-three-dots" style="font-size: 18px; color: white;"></i>
              <div class="ms-2" style="opacity: 0.9;">더 보기</div>
          </a>
      </li>
  </ul>
</div>
